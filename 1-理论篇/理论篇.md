### ![](static/chap0-1.png)
### 1、定义
TraaS（Technological Risk-defense as a Service）提供一套现代化的风险管理方法和技术平台，通过数据驱动提高系统的弹性和稳定性，降低由于IT系统问题造成的系统宕机、客户损失和资源浪费。
### 2、特性
#### 绿色
随着社会信息化水平的快速发展，政府、经济及社会领域的各个行业对信息系统的依赖程度越来越高，信息产业的能耗越来越高。同时，近年来，计算设备和资源数量仍在持续快速增长以满足云计算、大数据等新兴技术发展需要，计算能耗以及IT产业对环境的影响问题日益突显。
TraaS通过智能资源容量调度等方法和技术平台，能够在资源利用方面做到合理的节省，并在资源利用和系统稳定性之间达成一种最优的平衡。
ESG概念和评价体系的出现，对企业在社会环境的可持续发展方面的贡献提出较高要求，TraaS是对ESG概念的优秀实践之一。
#### 稳定
随着云计算的发展和国内企业上云进程的加速，云服务的稳定运行是企业发展的重要保障。党的十八大以来，党中央国务院高度重视安全生产工作，要求针对安全生产事故主要特点和突出问题，层层压实责任，狠抓整改落实。
TraaS中的Risk defense本就是风险防御(或风险免疫)之意，保障系统和云服务的稳定运行是其主要目的之一。在TraaS的诸多领域中，例如变更，容量，应急等，都提供有一套完整的风险防御的方法和技术平台，另外，TraaS也会通过混沌工程来驱动稳定性的技术演进，宣导稳定性的文化。
#### 智能
TraaS要求风险防控能力的建设从系统化逐步走向智能化。智能化建设以当前系统平台为基础，引入数据建模和机器学习技术进行快速高效的迭代，动态的适应技术风险的演进。
智能化的风险防控，能够将人从重复且复杂的风险防控工作中解放出来，实现风险防控的智能化托管，从而能够提高企业的研发产能，降低在风险领域的人力成本。
### 3、原则
#### 原则1：理性看待风险
**只要存在发生事故的原因，事故就一定会发生，而且不管其可能性多么小，但总会发生，并造成最大可能的损失。--墨菲定律**
**任何不安全事故都是可以预防的。每一起严重事故的背后，必然有29次轻微事故和300起未遂先兆以及1000起事故隐患。 --海恩法则**
**阳光是最好的防腐剂，灯泡是最有效的警察。 --著名法官布兰狄西**

风险是客观存在的，事故发生的概率再小也可能发生，并造成最大可能的损失。放任不管，危害很大。
事故是可预防的，通过科学的安全生产管理，可以降低事故发生的概率和造成的危害。

- 事故的发生是量的积累的结果，各种问题碰到一起，各道防线都被击穿。
- 事故的预防，既要靠好的技术，也要靠好的规章，还要靠好的人员素质和责任心。

风险通常附着在为用户提供的服务之上，要防控好风险通常意味着要付出更高的成本，甚至会降低服务交付效率。这需要有全员都认同的**服务质量目标SLO**，来指引各团队平衡好风险、成本、效率。
让所有人都完整的看见风险，充分的理解风险，并积极行动起来，是SRE工作非常好的开始。
#### 原则2：制定服务质量目标
所有人的努力都是为了给用户提供更好的服务，让每笔业务精准可靠、让每次体验丝般顺滑是大家共同的质量保障目标，因此服务质量目标最好基于用户感知来制定。
##### 服务质量度量指标（SLI）
基于实际影响用户数和理论影响业务量，定义了全站故障等级和故障分服务质量指标，并以此制定各团队的服务质量目标。
##### 服务质量目标（SLO）
通过对历史故障的分析，评估通过技术手段可能得到的改进空间，给出每年的服务质量SLO，并且每年都要提交更高的SLO。
##### 谁来提交质量目标
SRE和业务研发团队都会提交服务质量目标，SRE为所有提交的服务质量目标负责，背所有的服务质量KPI。

- SRE，负责提交全站统一的底线故障等级和KPI指标，并报备技术委员会及CEO批准。
- 各业务研发团队，负责提交自己业务的故障等级和KPI指标，必须高于全站底线标准。该业务相关研发、质量、SRE共同为这个目标负责。
##### 谁为质量目标负责

- 各业务研发团队，为自己提交的服务质量目标负责。
- SRE为所有提交的服务质量目标负责，背所有的服务质量目标。
##### 风险、成本、效率的平衡
SRE要同时为风险、成本、效率负责，风险防控业务的提升不能以无限制的增加成本和降低效率为代价，这要求SRE必须要通过技术手段技术创新来提升风险防控业务，而不能靠简单的堆机器和加流程来拿结果。SRE必须要靠自己的技术能力和价值输出赢得认同。
#### 原则3：应对整个系统的不确定性
风险随处可能发生，风险防控工作应面向整个系统，包括SaaS、PaaS、IaaS，做到完整。
#### 原则4：贯彻变更三板斧
变更是故障的主要来源之一，必须贯彻能够有效减少变更故障的三板斧原则——**可灰度、可监控、可恢复**，同时沉淀整套的变更产品来支撑变更三板斧原则的落地，并最终向变更无人值守演进。
##### 可灰度
指整个变更能够分批执行，每次变更影响范围是可控的隔离的。这是减少变更影响面（用户数等）的重要手段，能有机会在变更造成重大事故前发现问题停止变更。
##### 可监控
变更的目标系统是否正常必须能够被监控，有问题能够及时发现，执行恢复措施。
##### 可恢复
做变更方案时要考虑可能发生什么意外，恢复预案是什么，甚至如果第一恢复预案失败，第二恢复预案是什么。
#### 原则5：持续用混沌工程验证系统
相对而言，线上风险事件数量还是比较小的，技术风险防控体系很难持续通过实际故障来验证是否有效，系统和人的能力很难通过实际故障来驱动快速迭代成长。因此，需要尽可能高频的人为制造故障来驱动风险防控能力的提升，通过持续的混沌工程来牵引风险防控能力的建设。
#### 原则6：效率至上，通过系统解决效率问题
技术风险工作的效率至关重要，虽然靠堆砌人力可以在一定程度上解决问题，但随着系统规模的增长，人力成本将会越来越高，必须要将防控能力系统化和自动化，通过系统解决效率问题，降低人力成本。
#### 原则7：经验不可信，技术手段优先于人工经验
这一条与原则6有相似之处，经验都是人工的，人会出错，并且随着系统变化，经验可能不再适用，因此必须通过技术手段将人工经验转化为系统能力，并且这些能力能够适应业务和系统的变化。
#### 原则8：持续进行技术风险文化运营
持续的技术风险文化运营，让所有人都能持续保持对用户体验对技术风险的敬畏之心，同样非常重要。

- 通过安全生产牌公示让各团队都能够实时看到自己的技术风险业务数据。
- 通过故障AAR(After Action Review)框架驱动各团队分析每个问题的改进措施，并跟进每个行动的完成情况及对目标的实际作用。
- 通过红蓝攻防等大型活动、技术风险认证考试等方式持续强化全员技术风险意识。
### 4、策略
#### 技术方向：平台工程&自适应AIOps
技术风险领域内的问题，大多可以转化为平台工程问题，技术风险工程师的经验也需要通过平台沉淀下来，这些平台包括变更管控平台，容量管理平台，应急定位平台等等；同时，智能化应是平台发展的趋势，将基于“人工经验”的能力，逐步转变为基于“算法和机器学习”的能力，让技术风险平台具备自适应、自学习、自反馈的特点。
#### 运营管理：故障驱动&混沌工程
技术风险工作的主要驱动力为故障，通过故障驱动技术风险防控能力和流程制度的建设；同时，由于故障不总是发生，所以需要通过混沌工程在日常对防控能力和流程制度进行不断检验。故障驱动和混沌工程也是技术风险运营管理的两个主要手段。
#### 业务价值：风险降低&成本降低&效率提升
应始终坚持以降低风险，降低成本，提升效率三点为技术风险的核心业务价值，并能够在风险，成本，效率三者之间取得平衡。
